<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1,viewport-fit=cover"
    />
    <title>Human Rights Festival 2025</title>
    <style>
      :root {
        --bg: #0f1724; /* page background */
        --card: #0b1220; /* screen surface */
        --accent: #06b6d4; /* active color */
        --muted: #9aa4b2; /* inactive color */
        --nav-bg: rgba(255, 255, 255, 0.03);
        --radius: 14px;
        font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto,
          "Helvetica Neue", Arial;
      }
      html,
      body {
        height: 96%;
      }
      body {
        margin: 0;
        background: linear-gradient(180deg, var(--bg), #07101a);
        color: #e6eef6;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
      }

      /* App frame */
      .phone {
        width: 400px; /* desktop preview width; it'll scale on mobile */
        max-width: 100%;
        height: 780px;
        max-height: 100vh;
        background: linear-gradient(180deg, #071826 0%, #0b1b2a 100%);
        border-radius: 30px;
        box-shadow: 0 20px 40px rgba(2, 6, 23, 0.6),
          0 4px 10px rgba(0, 0, 0, 0.6) inset;
        position: relative;
        overflow: hidden;
        display: flex;
        flex-direction: column;
      }

      /* Top bar (status) */
      .status {
        height: 44px;
        flex: 0 0 44px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 12px;
        font-size: 13px;
        color: var(--muted);
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.02),
          transparent
        );
        border-bottom: 1px solid rgba(255, 255, 255, 0.02);
      }

      /* Content area */
      .content {
        position: relative;
        flex: 1 1 auto;
        display: block;
        padding: 18px;
        padding-bottom: 90px; /* prevent content from being hidden under tabbar */
        overflow-x: hidden;
        overflow-y: auto;
        background: transparent;
        scroll-behavior: smooth;
        scrollbar-width: none;
        -ms-overflow-style: none;
      }
      .content::-webkit-scrollbar {
        display: none;
      }

      /* Make each screen auto-sized instead of stretching */
      .screen {
        display: block;
        height: auto;
        min-height: fit-content;
        padding-bottom: 45px;
      }

      .screen.active {
        transform: none;
        opacity: 1;
        pointer-events: auto;
      }

      /* Optional: only the active screen is shown */
      .screen:not(.active) {
        display: none;
      }

      .card {
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.02),
          rgba(255, 255, 255, 0.01)
        );
        max-width: 95%;
        border-radius: 12px;
        padding: 14px;
        margin-bottom: 12px;
        box-shadow: 0 6px 18px rgba(2, 6, 23, 0.45);
        border: 1px solid rgba(255, 255, 255, 0.03);
      }

      h1 {
        margin: 0 0 8px;
        font-size: 24px;
        font-weight: 800;
      }
      h3 {
        margin: 0 0 8px;
        font-size: 18px;
        font-weight: 600;
      }
      p {
        margin: 0;
        color: var(--muted);
        line-height: 1.5;
      }
      a {
        margin: 0;
        color: var(--muted);
        line-height: 1.5;
      }

      a:hover {
        color: #aaa; /* slightly lighter on hover */
      }

      /* Bottom tab bar */
      .tabbar {
        position: absolute; /* fixed inside the phone frame */
        bottom: 0;
        left: 0;
        right: 0;
        height: 64px;
        background: var(--nav-bg);
        backdrop-filter: blur(8px);
        border-top: 1px solid rgba(255, 255, 255, 0.03);
        border-radius: 0;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 8px 12px 50px;
        z-index: 10;
      }

      .tab {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        padding: 8px;
        border-radius: 12px;
        cursor: pointer;
        user-select: none;
        transition: all 180ms ease;
        opacity: 0.95;
      }
      .tab:focus {
        outline: 2px solid rgba(6, 182, 212, 0.16);
        outline-offset: 3px;
      }

      .tab .icon {
        width: 22px;
        height: 22px;
        display: inline-block;
      }
      .tab .label {
        font-size: 12px;
        color: var(--muted);
      }
      .tab.active .label {
        color: var(--accent);
        font-weight: 600;
      }
      .tab.active .icon svg {
        filter: drop-shadow(0 2px 6px rgba(6, 182, 212, 0.15));
      }

      /* badge example */
      .badge {
        display: inline-block;
        padding: 2px 8px;
        border-radius: 999px;
        font-size: 11px;
        background: rgba(255, 255, 255, 0.04);
        color: var(--muted);
      }

      /* Responsive: make phone narrower on small screens */
      @media (max-width: 100%) {
        .phone {
          width: 100%;
          height: 100vh;
          border-radius: 0;
        }
        .tabbar {
          left: 0;
          right: 0;
          bottom: 0;
          border-radius: 0;
          height: 70px;
          padding: 10px;
        }
        .screen {
          padding: 20px 16px 96px;
        }
      }

      /* Refresh button style */
      .refresh-btn {
        position: sticky;
        bottom: 45px;
        left: 75%;
        z-index: 1000;
        padding: 12px 18px;
        border: none;
        border-radius: 14px;
        background: var(--accent, #06b6d4);
        color: white;
        font-weight: 600;
        font-size: 14px;
        cursor: pointer;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        transition: all 0.25s ease;
      }

      .refresh-btn:hover {
        background: #0891b2;
        transform: translateY(-3px);
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
      }
    </style>
  </head>

  <body>
    <div
      class="phone"
      role="application"
      aria-label="Human Rights Festival 2025"
    >
      <div class="status" aria-hidden="true">
        <div>Human Rights Festival 2025</div>
        <div>Malaysian Bar</div>
      </div>

      <main class="content">
        <section
          id="vendors"
          class="screen active"
          role="region"
          aria-label="vendors screen"
        >
          <h1>Here are some vendors we handpicked for you!</h1>
          <p>
            Not Interested? Yeah we lied, its randomly picked.<br />
            Just hit <i>refresh</i> or check out the vendor list
            <i
              ><u><a href="">here</a></u></i
            >.
          </p>
          <br />
          <div id="vendorList">
            <div class="card">
              <h3>vendors</h3>
              <p>
                Welcome to the vendors screen. This area is scrollable and can
                contain any content — lists, cards, maps, etc.
              </p>
            </div>
            <div class="card">
              <h3>Recent</h3>
              <p class="muted">
                Recent activity, notifications, or anything you'd like to show
                on the first tab.
              </p>
            </div>
          </div>
          <button onclick="refreshVendors()" class="refresh-btn">
            Refresh
          </button>
        </section>

        <section
          id="about"
          class="screen"
          role="region"
          aria-label="about screen"
        >
          <h1>About Us</h1>
          <div class="card">
            <h3>About</h3>
            <p>
              Cool about page with links and stuff about this event. Very
              impressive stuff.
            </p>
          </div>
          <div class="card">
            <h3>Social Media Links and Stuff</h3>
            <p class="muted">
              Links to social media, contact info, and other relevant details.
            </p>
          </div>
        </section>
      </main>

      <nav class="tabbar" role="tablist" aria-label="Bottom tabs">
        <button
          class="tab active"
          role="tab"
          aria-selected="true"
          aria-controls="vendors"
          data-target="vendors"
          id="tab-vendors"
        >
          <span class="label">Vendors</span>
        </button>

        <button
          class="tab"
          role="tab"
          aria-selected="false"
          aria-controls="about"
          data-target="about"
          id="tab-about"
        >
          <span class="label">About</span>
        </button>
      </nav>

      <script>
        // Tab switching logic with URL hash support + accessibility
        (function () {
          const tabs = document.querySelectorAll(".tab");
          const screens = document.querySelectorAll(".screen");

          function activate(targetId, pushState = true) {
            // toggle tab active states
            tabs.forEach((t) => {
              const is = t.dataset.target === targetId;
              t.classList.toggle("active", is);
              t.setAttribute("aria-selected", is ? "true" : "false");
            });
            // toggle screens
            screens.forEach((s) => {
              s.classList.toggle("active", s.id === targetId);
            });

            if (pushState) {
              history.replaceState(null, "", "#" + targetId);
            }
          }

          // attach events
          tabs.forEach((t) => {
            t.addEventListener("click", () => activate(t.dataset.target));
            t.addEventListener("keydown", (e) => {
              if (e.key === "Enter" || e.key === " ") {
                e.preventDefault();
                activate(t.dataset.target);
              }
            });
          });

          // on load, open from hash if present
          const initial = location.hash
            ? location.hash.replace("#", "")
            : "vendors";
          if (document.getElementById(initial)) activate(initial, false);

          // handle back/forward
          window.addEventListener("hashchange", () => {
            const h = location.hash.replace("#", "") || "vendors";
            if (document.getElementById(h)) activate(h, false);
          });

          // always scroll to top when switching screens
          const realActivate = activate;
          activate = function (target) {
            // deactivate current screen
            const cur = document.querySelector(".screen.active");
            if (cur) cur.classList.remove("active");

            // activate target screen
            realActivate(target);

            // scroll to top of the content area or screen
            const opened = document.getElementById(target);
            if (opened)
              opened.scrollTo({
                top: 0,
                behavior: "instant" in Intl ? "smooth" : "auto",
              });
          };
        })();
      </script>
    </div>
  </body>
  <script>
    // --- Vendor data ---
    const vendors = [
      {
        name: "Aisha Rahman",
        desc: "Advocates for women’s empowerment and equal access to education in rural Malaysia.",
      },
      {
        name: "Daniel Wong",
        desc: "Focuses on freedom of expression and online safety for youth activists.",
      },
      {
        name: "Siti Nurhaliza Karim",
        desc: "Campaigns for refugee and asylum-seeker rights across Southeast Asia.",
      },
      {
        name: "Arun Menon",
        desc: "Promotes LGBTQ+ equality and inclusive community engagement.",
      },
      {
        name: "Maria Lopez",
        desc: "Humanitarian volunteer raising awareness on child labour and exploitation.",
      },
      {
        name: "Kelvin Othman",
        desc: "Leads digital rights initiatives protecting online privacy and free speech.",
      },
      {
        name: "Noraini Abdullah",
        desc: "Supports indigenous communities in land rights and cultural preservation.",
      },
      {
        name: "Ravi Chandran",
        desc: "Works on improving migrant worker conditions and fair employment laws.",
      },
      {
        name: "Li Wei Tan",
        desc: "Advocates for accessibility and disability inclusion in workplaces.",
      },
      {
        name: "Jessica Lim",
        desc: "Focuses on environmental justice and climate resilience in vulnerable communities.",
      },
      {
        name: "Hassan Ali",
        desc: "Campaigns against racial discrimination and promotes interfaith dialogue.",
      },
      {
        name: "Nurul Zain",
        desc: "Trains young activists in peacebuilding and conflict mediation.",
      },
      {
        name: "Samuel Tan",
        desc: "Advocates for press freedom and protection of journalists.",
      },
      {
        name: "Mei Chen",
        desc: "Raises awareness on gender-based violence and survivor protection.",
      },
      {
        name: "Rahul Patel",
        desc: "Leads initiatives for fair access to healthcare for marginalised groups.",
      },
      {
        name: "Aminah Bakri",
        desc: "Works on empowering single mothers through social entrepreneurship.",
      },
      {
        name: "David Lim",
        desc: "Defends political prisoners and advocates for judicial transparency.",
      },
      {
        name: "Sarah Noor",
        desc: "Promotes education access for stateless children in border regions.",
      },
      {
        name: "John Francis",
        desc: "Supports anti-human trafficking operations and survivor rehabilitation.",
      },
      {
        name: "Elena Petrova",
        desc: "International activist for digital freedom and open internet advocacy.",
      },
      {
        name: "Harun Salleh",
        desc: "Community leader promoting youth engagement in civic decision-making.",
      },
      {
        name: "Lisa George",
        desc: "Campaigns for gender equality in corporate leadership roles.",
      },
      {
        name: "Aqil Rahmat",
        desc: "Advocates for clean water and sanitation rights in underserved areas.",
      },
      {
        name: "Caroline Tan",
        desc: "Works with NGOs to strengthen regional cooperation on human rights.",
      },
      {
        name: "Nur Hidayah",
        desc: "Trains rural communities in democratic participation and civic literacy.",
      },
      {
        name: "Victor Ng",
        desc: "Specialises in corporate accountability and ethical governance.",
      },
      {
        name: "Amira Yusuf",
        desc: "Champions reproductive health rights and women’s healthcare access.",
      },
      {
        name: "Zul Arif",
        desc: "Leads campaigns on anti-corruption and transparency reforms.",
      },
      {
        name: "Farah Liyana",
        desc: "Supports education equality for indigenous and remote-area children.",
      },
      {
        name: "Rizwan Ahmad",
        desc: "Advocates for fair trials and abolition of the death penalty.",
      },
      {
        name: "Emily Chia",
        desc: "Coordinates volunteer networks for humanitarian disaster response.",
      },
      {
        name: "Tengku Hafiz",
        desc: "Promotes digital literacy and combats misinformation online.",
      },
      {
        name: "Noor Fatimah",
        desc: "Supports survivors of domestic abuse through counselling and legal aid.",
      },
      {
        name: "Adam Chong",
        desc: "Engages businesses in corporate social responsibility and fair trade.",
      },
      {
        name: "Irene Soon",
        desc: "Promotes public transparency in environmental policies.",
      },
      {
        name: "Fadzil Malik",
        desc: "Advocates for freedom of assembly and fair protest rights.",
      },
      {
        name: "Chong Wei",
        desc: "Focuses on promoting youth leadership in social change.",
      },
      {
        name: "Nur Amirah",
        desc: "Raises awareness on child marriage prevention.",
      },
      {
        name: "Hafiz Osman",
        desc: "Advocates for rights of persons with disabilities in employment.",
      },
      {
        name: "Priya Krishnan",
        desc: "Promotes inclusion and equality in education systems.",
      },
    ];

    // --- Helper functions for cookie handling ---
    function setCookie(name, value, days) {
      const d = new Date();
      d.setTime(d.getTime() + days * 24 * 60 * 60 * 1000);
      const expires = "expires=" + d.toUTCString();
      document.cookie =
        name + "=" + encodeURIComponent(value) + ";" + expires + ";path=/";
    }

    function getCookie(name) {
      const decoded = decodeURIComponent(document.cookie);
      const parts = decoded.split("; ");
      for (let part of parts) {
        if (part.startsWith(name + "=")) {
          return part.substring(name.length + 1);
        }
      }
      return null;
    }

    // --- Main logic ---
    let selectedVendors = [];

    const saved = getCookie("selectedVendors");
    if (saved) {
      selectedVendors = JSON.parse(saved);
    } else {
      const selectedIndices = [];
      while (selectedIndices.length < 10) {
        const idx = Math.floor(Math.random() * vendors.length);
        if (!selectedIndices.includes(idx)) selectedIndices.push(idx);
      }
      selectedVendors = selectedIndices.map((i) => vendors[i]);
      setCookie("selectedVendors", JSON.stringify(selectedVendors), 30);
    }

    // Display vendors in card format
    const vendorList = document.getElementById("vendorList");
    vendorList.innerHTML = "";

    selectedVendors.forEach((v) => {
      const card = document.createElement("div");
      card.className = "card";
      card.innerHTML = `<h3>${v.name}</h3><p>${v.desc}</p>`;
      vendorList.appendChild(card);
    });

    // Refresh vendors function
    function refreshVendors() {
      // Clear the cookie
      document.cookie =
        "selectedVendors=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
      // Reload the page to regenerate new vendors
      location.reload();
    }

    function ensureOpenAndScrollTop() {
      const initial = location.hash
        ? location.hash.replace("#", "")
        : "vendors";
      // If activate exists and is callable, use it. Otherwise fall back to clicking the tab.
      if (typeof activate === "function") {
        try {
          activate(initial, false); // second arg = don't push history
        } catch (e) {
          // fallback if activate throws
          const tabBtn = document.querySelector(`[data-target="${initial}"]`);
          if (tabBtn) tabBtn.click();
        }
      } else {
        const tabBtn = document.querySelector(`[data-target="${initial}"]`);
        if (tabBtn) tabBtn.click();
      }

      // Scroll the content container to top (instant). Use smooth if you prefer.
      const content = document.querySelector(".content");
      if (content)
        content.scrollTo({
          top: 0,
          behavior: "instant" in Intl ? "smooth" : "auto",
        });
    }

    // Run once DOM is loaded
    window.addEventListener("DOMContentLoaded", () => {
      ensureOpenAndScrollTop();
    });

    // Also run on full load (covers images/fonts)
    window.addEventListener("load", () => {
      ensureOpenAndScrollTop();
    });

    // Also scroll to top when hash changes (back/forward)
    window.addEventListener("hashchange", () => {
      ensureOpenAndScrollTop();
    });
  </script>
</html>
