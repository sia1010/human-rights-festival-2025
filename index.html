<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1,viewport-fit=cover"
    />
    <title>Human Rights Festival 2025</title>
    <style>
      :root {
        --bg: #0f1724; /* page background */
        --card: #0b1220; /* screen surface */
        --accent: #f15f5fe7; /* active color */
        --muted: #5a5c60; /* inactive color */
        --nav-bg: rgba(255, 255, 255, 0.03);
        --radius: 14px;
        font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto,
          "Helvetica Neue", Arial;
      }
      html,
      body {
        height: 96%;
      }
      body {
        margin: 0;
        background: linear-gradient(180deg, var(--bg), #13273e);
        color: #07101a;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      /* App frame */
      .phone {
        width: 400px; /* desktop preview width; it'll scale on mobile */
        max-width: 100%;
        height: 780px;
        max-height: 100vh;
        background: url("human-rights-bg.png") no-repeat center center;
        background-size: cover;
        border-radius: 30px;
        box-shadow: 0 20px 40px rgba(2, 6, 23, 0.6),
          0 4px 10px rgba(0, 0, 0, 0.6) inset;
        position: relative;
        overflow: hidden;
        display: flex;
        flex-direction: column;
      }

      /* Top bar (status) ‚Äî mobile safe and consistent */
      .status {
        height: calc(44px + env(safe-area-inset-top, 0px));
        flex: 0 0 auto;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: env(safe-area-inset-top, 0px) 12px 0 12px;
        font-size: 13px;
        color: var(--muted);
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.02),
          transparent
        );
        border-bottom: 1px solid rgba(255, 255, 255, 0.02);
        box-sizing: border-box;
      }

      /* Content area */
      .content {
        position: relative;
        flex: 1 1 auto;
        display: block;
        padding: 18px;
        padding-bottom: 90px; /* prevent content from being hidden under tabbar */
        overflow-x: hidden;
        overflow-y: auto;
        background: transparent;
        scroll-behavior: smooth;
        scrollbar-width: none;
        -ms-overflow-style: none;
      }
      .content::-webkit-scrollbar {
        display: none;
      }

      /* Make each screen auto-sized instead of stretching */
      .screen {
        display: block;
        height: auto;
        min-height: fit-content;
        padding-bottom: 45px;
      }

      .screen.active {
        transform: none;
        opacity: 1;
        pointer-events: auto;
      }

      /* Optional: only the active screen is shown */
      .screen:not(.active) {
        display: none;
      }

      .card {
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 1),
          rgba(255, 255, 255, 0.01)
        );
        max-width: 95%;
        border-radius: 12px;
        padding: 14px;
        margin-bottom: 12px;
        box-shadow: 0 6px 18px rgba(2, 6, 23, 0.45);
      }

      h1 {
        margin: 0 0 8px;
        font-size: 24px;
        font-weight: 800;
        color: var(--accent);
      }
      h3 {
        margin: 0 0 8px;
        font-size: 18px;
        font-weight: 600;
      }
      p {
        margin: 0;
        color: var(--muted);
        line-height: 1.5;
      }
      a {
        margin: 0;
        color: var(--muted);
        line-height: 1.5;
      }

      a:hover {
        color: #aaa; /* slightly lighter on hover */
      }

      /* Bottom tab bar */
      .tabbar {
        position: absolute; /* fixed inside the phone frame */
        bottom: 0;
        left: 0;
        right: 0;
        height: 34px;
        background: var(--nav-bg);
        border-top: 1px solid rgba(255, 255, 255, 0.03);
        border-radius: 0;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 8px 12px 50px;
        z-index: 10;
      }

      .tab {
        border: none;
        background: transparent;
        padding: 0;
        margin: 0;
        cursor: pointer;
        display: flex;
        justify-content: center; /* center horizontally */
        align-items: center; /* center vertically */
        flex: 1 1 auto;
        height: 100%;
      }

      .tab:focus {
        outline: none;
      }

      .tab-icon {
        display: block;
        width: 80%;
        height: auto;
        object-fit: contain;
      }

      /* Optional active highlight */
      .tab .tab-icon {
        filter: opacity(0.5);
        transition: transform 0.25s ease, opacity 0.25s ease;
      }

      .tab.active .tab-icon {
        filter: opacity(0.9);
        transform: scale(1.2); /* increase size of active icon */
      }

      /* badge example */
      .badge {
        display: inline-block;
        padding: 2px 8px;
        border-radius: 999px;
        font-size: 11px;
        background: rgba(255, 255, 255, 0.04);
        color: var(--muted);
      }

      /* Responsive: make phone narrower on small screens */
      @media (max-width: 100%) {
        .phone {
          width: 100%;
          height: 100vh;
          border-radius: 0;
        }
        .tabbar {
          left: 0;
          right: 0;
          bottom: 0;
          border-radius: 0;
          height: 70px;
          padding: 10px;
        }
        .screen {
          padding: 20px 0px 96px;
        }
      }

      /* --- NEW GAME CSS --- */
      #game-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        height: 100%; /* Try to fill the screen */
        justify-content: space-around;
      }

      #wheel-container {
        position: relative;
        width: 200px;
        height: 200px;
        margin: 20px auto;
        display: none; /* Initially hidden */
      }

      #wheel {
        width: 100%;
        height: 100%;
        border-radius: 50%;
        background-image: conic-gradient(
          #e53e3e 0deg 90deg,
          #38a169 90deg 180deg,
          #3182ce 180deg 270deg,
          #d69e2e 270deg 360deg
        );
        /* Animation will be controlled by JS */
        border: 8px solid #07101a;
        box-shadow: 0 0 20px rgba(6, 182, 212, 0.4);
      }

      @keyframes spin {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(3600deg); /* 10 full spins */
        }
      }

      #quiz-section {
        width: 100%;
        margin-top: 0px;
        text-align: left;
      }

      .choice-btn {
        width: 100%;
        padding: 12px;
        margin: 6px 0;
        border: 0px solid var(--accent);
        background-image: var(--bg);
        background-repeat: no-repeat;
        background-size: cover;
        background-position: center center;
        color: rgba(0, 0, 0, 0.95);
        border-radius: 8px;
        cursor: pointer;
        font-size: 14px;
        transition: background 0.2s;
        text-align: left;
      }
      .choice-btn:hover:not(:disabled) {
        .choice-btn {
          width: 100%;
          padding: 12px;
          margin: 6px 0;
          border: 1px solid var(--accent);
          background: white;
          color: rgba(0, 0, 0, 0.95);
          border-radius: 8px;
          cursor: pointer;
          font-size: 14px;
          transition: background 0.2s;
          text-align: left;
        }
      }
      .choice-btn:disabled {
        opacity: 1; /* Keep opacity for visibility */
      }

      .correct-answer {
        background-color: rgba(
          52,
          211,
          153,
          0.4
        ) !important; /* Green for correct */
        border-color: #34d399 !important;
      }
      .wrong-answer {
        background-color: rgba(
          239,
          68,
          68,
          0.4
        ) !important; /* Red for incorrect click */
        border-color: #ef4444 !important;
      }

      /* Redefine refresh-btn as the main game button */
      .game-btn {
        position: relative; /* Not sticky anymore */
        bottom: auto;
        left: auto;
        right: auto;
        z-index: 100;
        padding: 12px 18px;
        border: none;
        border-radius: 14px;
        background: url("collage_button.png") no-repeat center center;
        background-size: cover;
        color: rgba(0, 0, 0, 0.8);
        font-weight: 600;
        font-size: 14px;
        cursor: pointer;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        transition: all 0.25s ease;
        margin-top: 20px;
        width: 100%;
        max-width: 300px;
      }
      .game-btn:hover:not(:disabled) {
        background: url("collage_button.png") no-repeat center center;
        background-size: cover;
        color: rgba(0, 0, 0, 0.95);
        transform: translateY(-3px);
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
      }
      .game-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none;
      }
    </style>
  </head>

  <body>
    <div
      class="phone"
      role="application"
      aria-label="Human Rights Festival 2025"
    >
      <main class="content">
        <section
          id="vendors"
          class="screen active"
          role="region"
          aria-label="Human Rights Quiz"
        >
          <div id="game-container">
            <img
              src="title.png"
              style="
                position: absolute;
                top: 15px;
                left: 50%;
                transform: translateX(-50%);
                height: 200px;
                z-index: 0;
              "
            />
            <div style="height: 145px"></div>
            <h3
              style="z-index: 10; color: darkolivegreen"
              id="spins-score-info"
            >
              Rounds Left: 4 | Score: 0
            </h3>

            <h1 id="game-info" style="z-index: 10"> </h1>
            <div id="wheel-container">
              <div id="wheel"></div>
            </div>

            <div id="quiz-section" style="display: none; z-index: 10">
              <h3 id="question-text" style="color: var(--accent)"></h3>
              <div id="choices-container"></div>
            </div>

            <button id="spin-btn" class="game-btn">Spin the Wheel (4 left)</button>
            <button id="play-again-btn" class="game-btn" style="display: none">
              Play Again!
            </button>
          </div>
        </section>

        <section
          id="about"
          class="screen"
          role="region"
          aria-label="about screen"
        >
          <div style="height: 70px">
          </div>
          <div style="text-align: center">
            <h1>About Us</h1>
          </div>
          <img
            src="hrf_sticker.jpg"
            alt="Human Rights Festival Logo"
            style="
              width: 80%;
              max-width: 100%;
              display: block;
              margin: 0 auto 12px auto;
            "
          />
          <div class="card" style="text-align: center">
            <h3
              style="
                margin: 0;
                font-size: 1.1rem;
                font-weight: 600;
                background: linear-gradient(
                  90deg,
                  #fa7e1e,
                  #d62976,
                  #962fbf,
                  #4f5bd5
                );
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
              "
            >
              Official Instagram Account
            </h3>
            <p style="margin: 8px 0 0 0">
              <a
                href="https://www.instagram.com/bc.hrc/"
                target="_blank"
                style="
                  color: white;
                  text-decoration: none;
                  background: linear-gradient(90deg, #fa7e1e, #d62976);
                  padding: 6px 12px;
                  border-radius: 10px;
                  display: inline-block;
                "
              >
                @bc.hrc
              </a>
            </p>
          </div>
        </section>
      </main>

      <nav class="tabbar" role="tablist" aria-label="Bottom tabs">
        <button
          class="tab active"
          role="tab"
          aria-selected="true"
          aria-controls="vendors"
          data-target="vendors"
          id="tab-vendors"
        >
          <img src="quiz.png" alt="Quiz" class="tab-icon" />
        </button>

        <button
          class="tab"
          role="tab"
          aria-selected="false"
          aria-controls="about"
          data-target="about"
          id="tab-about"
        >
          <img src="about.png" alt="About" class="tab-icon" />
        </button>
      </nav>

      <script>
        // Tab switching logic with URL hash support + accessibility
        (function () {
          const tabs = document.querySelectorAll(".tab");
          const screens = document.querySelectorAll(".screen");

          function activate(targetId, pushState = true) {
            // toggle tab active states
            tabs.forEach((t) => {
              const is = t.dataset.target === targetId;
              t.classList.toggle("active", is);
              t.setAttribute("aria-selected", is ? "true" : "false");
            });
            // toggle screens
            screens.forEach((s) => {
              s.classList.toggle("active", s.id === targetId);
            });

            if (pushState) {
              history.replaceState(null, "", "#" + targetId);
            }
          }

          // attach events
          tabs.forEach((t) => {
            t.addEventListener("click", () => activate(t.dataset.target));
            t.addEventListener("keydown", (e) => {
              if (e.key === "Enter" || e.key === " ") {
                e.preventDefault();
                activate(t.dataset.target);
              }
            });
          });

          // on load, open from hash if present
          const initial = location.hash
            ? location.hash.replace("#", "")
            : "vendors";
          if (document.getElementById(initial)) activate(initial, false);

          // handle back/forward
          window.addEventListener("hashchange", () => {
            const h = location.hash.replace("#", "") || "vendors";
            if (document.getElementById(h)) activate(h, false);
          });

          // always scroll to top when switching screens
          const realActivate = activate;
          activate = function (target) {
            // deactivate current screen
            const cur = document.querySelector(".screen.active");
            if (cur) cur.classList.remove("active");

            // activate target screen
            realActivate(target);

            // scroll to top of the content area or screen
            const opened = document.getElementById(target);
            if (opened)
              opened.scrollTo({
                top: 0,
                behavior: "smooth",
              });
          };
        })();
      </script>
    </div>
  </body>
  <script>
    // --- NEW: Color Definitions ---
    const choicebg = [
      "peach.png", // Mint Green / Soft Aqua
      "cement.png", // Light Yellow / Pale Gold
      "olive.png", // Light Lilac / Soft Lavender
      "cyan.png", // Light Pink / Pastel Rose
    ];
    // --- END Color Definitions ---

    // --- Helper functions for cookie handling ---
    function setCookie(name, value, days) {
      const d = new Date();
      d.setTime(d.getTime() + days * 24 * 60 * 60 * 1000);
      const expires = "expires=" + d.toUTCString();
      document.cookie =
        name + "=" + encodeURIComponent(value) + ";" + expires + ";path=/";
    }

    function getCookie(name) {
      const decoded = decodeURIComponent(document.cookie);
      const parts = decoded.split("; ");
      for (let part of parts) {
        if (part.startsWith(name + "=")) {
          return part.substring(name.length + 1);
        }
      }
      return null;
    }

    function deleteCookie(name) {
      document.cookie =
        name + "=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
    }
    // --- END Cookie Helpers ---

    // --- FULLY CUSTOMIZABLE QUIZ DATA ---
    // The game will randomly select from this list, ensuring no ID is repeated.
    const quizData = [
      {
        id: 1,
        question: "Which of the following is Tam Maba Studio‚Äôs signature showcase?",
        correct: "A. Kita punya cerita",
        incorrect: [
          "B. Seni Warisan Nusantara",
          "C. Urban Vibes",
          "D. Digital Futures",
        ],
        context:
          "The correct answer is A",
      },
      {
        id: 2,
        question: "Which principle forms the foundation of The HeartBased Group‚Äôs programmes and initiatives?",
        correct: "D. Diversity, Equity, and Inclusion (DEI)",
        incorrect: [
          "A. Free legal representation regardless of nationality",
          "B. Financial literacy workshops support growth of communities",
          "C. Confidence can come from public speaking coaching",
        ],
        context:
          "The correct answer is D",
      },
      {
        id: 3,
        question: "How does Dignity for Children empower and support children from marginalised communities?",
        correct: "A. By providing holistic care and education",
        incorrect: [
          "B. Through monthly cash transfers to families",
          "C. By organizing international adoption programs",
          "D. Through sports scholarships",
        ],
        context:
          "The correct answer is A",
      },
      {
        id: 4,
        question: "At what age did Anthony Lee start painting?",
        correct: "B. 9 years",
        incorrect: [
          "A. 7 years",
          "C. 12 years",
          "D. 15 years",
        ],
        context:
          "The correct answer is B",
      },
      {
        id: 5,
        question: "What actions does the Animal Kindness Coalition encourage the public to take to promote animal welfare?",
        correct: "A. Donate, partner, and advocate",
        incorrect: [
          "B. Ignore and avoid strays",
          "C. Observe, record, and publish",
          "D. Report, challenge, and protest",
        ],
        context:
          "The correct answer is A",
      },
      {
        id: 6,
        question: "The following are how the Mon Refugee Organisation assists Mon Refugees in Malaysia except:",
        correct: "D. Provide emergency relief ",
        incorrect: [
          "A. Provide quality education",
          "B. Provide healthcare services",
          "C. Provide teaching resources",
        ],
        context:
          "The correct answer is D",
      },
      {
        id: 7,
        question: "Most members of the Association of Nationalist Overseas Filipino Workers in Malaysia are employed in which sector?",
        correct: "B. Domestic workers",
        incorrect: [
          "A. Agricultural and plantation workers",
          "C. Restaurant and hotel staff",
          "D. Beauty and wellness workers",
        ],
        context:
          "The correct answer is B",
      },
      {
        id: 9,
        question: "Which of the following reflects one of Fugee HiEd‚Äôs key priorities?",
        correct: "C. Supporting greater access to and completion of tertiary education for refugee and stateless youth",
        incorrect: [
          "A. Advocating for broader engagement on refugee-related policies",
          "B. To partner with corporations for immediate job placements",
          "D. To offer mental health services and psychological first aid to refugees",
        ],
        context:
          "The correct answer is C",
      },
      {
        id: 10,
        question: "Which Malaysian labour law does PERTIMIG primarily advocate to reform in order to strengthen protections for domestic workers?",
        correct: "D. Employment Act 1955",
        incorrect: [
          "A. Industrial Relations Act 1967",
          "B. Trade Union Act 1959",
          "C. Occupational Safety and Health Act 1994",
        ],
        context:
          "The correct answer is D",
      },
      {
        id: 11,
        question: "How does Gerak Budaya promote critical awareness of Malaysian politics, history, culture and society?",
        correct: "B. Through publishing and distributing books",
        incorrect: [
          "A. By organizing nationwide political rallies and protests",
          "C. By hosting television and radio talk shows",
          "D. Through free music concerts and cultural festivals",
        ],
        context:
          "The correct answer is B",
      },
      {
        id: 13,
        question: "How does TheSpectrul empower the autistic and neurodiverse community?",
        correct: "A. Through art",
        incorrect: [
          "B. Through vocational training in IT",
          "C. Through organised sports and physical activities",
          "D. Through structured academic tutoring",
        ],
        context:
          "The correct answer is A",
      },
      {
        id: 15,
        question: "What initiative does DHRRA implement to alleviate poverty?",
        correct: "D.  Entrepreneurial capacity building workshops",
        incorrect: [
          "A. Direct cash transfer programs",
          "B. Free healthcare clinics ",
          "C. Corporate sponsorship for school supplies",
        ],
        context:
          "The correct answer is D",
      },
      {
        id: 16,
        question: "In what way has Pusat KOMAS supported efforts to address discrimination in workplaces?",
        correct: "C. By formulating the Code of Conduct for the Promotion of Equal Opportunities through the Elimination of Racial Discrimination",
        incorrect: [
          "A. Leading wage-related industrial actions",
          "B. By sponsoring free legal representation in industrial court cases",
          "D. By launching a public awareness campaign on workplace safety",
        ],
        context:
          "The correct answer is C",
      },
      {
        id: 18,
        question: "How does North South Initiative improve the lives of marginalised and disenfranchised communities in Malaysia and the Global South?",
        correct: "C. Through actionable research-driven solutions",
        incorrect: [
          "A. Through large-scale humanitarian aid distribution",
          "B. By funding micro-loans for small business start-ups",
          "D. By building schools and community centres",
        ],
        context:
          "The correct answer is C",
      },
      {
        id: 19,
        question: "Which student group does KPUM aim to support and empower in their academic journey?",
        correct: "C. Law students",
        incorrect: [
          "A. Engineering students",
          "B. Medical students",
          "D. Arts and humanities students",
        ],
        context:
          "The correct answer is C",
      },
      {
        id: 20,
        question: "How does Simply Food Company incorporate sustainability into its business practices?",
        correct: "A. Actively seeks sustainable sourcing and distribution solutions",
        incorrect: [
          "B. Invest heavily in carbon offset programs for their products",
          "C. Phase out all single-use plastics from their packaging",
          "D. Power all their facilities with 100% renewable energy",
        ],
        context:
          "The correct answer is A",
      },
      {
        id: 22,
        question: "What is SeniorsAloud's latest initiative to support retirees in practicing active ageing?",
        correct: "C. A calendar that serves as a guide to a healthy and active living and ageing well",
        incorrect: [
          "A. A subsidised travel and excursion club for members",
          "B. A nationwide series of low-impact aerobics classes",
          "D. A partnership with pharmacies for free health screenings",
        ],
        context:
          "The correct answer is C",
      },
      {
        id: 23,
        question: "What is the main mission behind The Pillars‚Äô community work?",
        correct: "B. To improve mental and physical wellbeing ",
        incorrect: [
          "A. To provide immediate financial aid to families",
          "C. To organise large-scale public festivals",
          "D. To offer professional career training",
        ],
        context:
          "The correct answer is B",
      },
      {
        id: 25,
        question: "What is Spread Love‚Äôs most recent cause?",
        correct: "A. Abolition of the death penalty",
        incorrect: [
          "B. Promotion of financial literacy for youth",
          "C. Conservation of local wildlife habitats",
          "D. Support for local independent artists",
        ],
        context:
          "The correct answer is A",
      },
      {
        id: 26,
        question: "How does Payung Redup help people access therapy anytime, anywhere?",
        correct: "C. Through online therapy sessions",
        incorrect: [
          "A. Through a network of free walk-in clinics",
          "B. By distributing self-help books and resources",
          "D. By training community peer supporters",
        ],
        context:
          "The correct answer is C",
      },
      {
        id: 27,
        question: "What role does the Pharmacy Enforcement Division play in protecting public health?",
        correct: "B. Ensuring the quality and safety of Malaysia‚Äôs pharmaceutical and cosmetic products",
        incorrect: [
          "A. Promoting traditional remedies through nationwide campaigns",
          "C. Providing short-term aid to communities during emergencies only",
          "D. Training international organisations to run community programmes in Malaysia",
        ],
        context:
          "The correct answer is B",
      },
      {
        id: 28,
        question: "What is Akar Umbi‚Äôs theory of change?",
        correct: "B. Strengthening grassroots communities so local changemakers can address the root causes of marginalisation using their lived experiences",
        incorrect: [
          "A. Supporting large corporations to lead national policy reforms",
          "C. Providing short-term aid to communities during emergencies",
          "D. Training international organisations to run community programmes in Malaysia",
        ],
        context:
          "The correct answer is B",
      },
      {
        id: 29,
        question: "In 2024, Greenpeace Malaysia achieved the following except: ",
        correct: "D. Launched a nationwide tree-planting programme that restored 5,000 hectares of degraded forest in Rawang",
        incorrect: [
          "A. Had a central role in SUHAKAM making a report on haze pollution and the right to clean air",
          "B. Successfully advocated for the ban of single-use plastics in national parks, protected forests and marine parks",
          "C. Installed solar panels at an orphanage in Sabak Bernam",
        ],
        context:
          "The correct answer is D",
      },
      {
        id: 30,
        question: "What is the All Women‚Äôs Action Society vision for society?",
        correct: "B. A just, democratic, and equitable society where everyone, especially women are respected and free from violence and discrimination",
        incorrect: [
          "A. A society that promotes economic growth through women-led businesses",
          "C. A community where women are encouraged to participate only in traditional roles",
          "D. A society that prioritises international partnerships to advance gender equality",
        ],
        context:
          "The correct answer is B",
      },
      {
        id: 31,
        question: "What is one of SUHAKAM‚Äôs key roles in Malaysia?",
        correct: "B. Promoting and protecting human rights through investigations, education, and public advocacy",
        incorrect: [
          "A. Managing the country‚Äôs healthcare and welfare programmes",
          "C. Overseeing all legal aid services for civil and criminal cases",
          "D. Drafting and passing new federal laws in Parliament involving international human rights treaties",
        ],
        context:
          "The correct answer is B",
      },
      {
        id: 33,
        question: "What is UNHCR mandated to do in Malaysia? ",
        correct: "A. Safeguard the rights and well-being of refugees and asylum-seekers",
        incorrect: [
          "B. Facilitate the local integration and grant citizenship to refugees",
          "C. Enforce immigration laws and detain individuals without valid documents",
          "D. Coordinate with employers to secure formal work permits for refugees",
        ],
        context:
          "The correct answer is A",
      },
      {
        id: 34,
        question: "What is one of ReformARTsi‚Äôs goal in implementing its new arts advocacy campaign?",
        correct: "C. To uphold the human rights of artists and cultural workers",
        incorrect: [
          "A. To establish a government-funded grant for large-scale art installations",
          "B. To organise international artist exchange programs",
          "D. To build a centralised digital archive for Malaysian traditional art",
        ],
        context:
          "The correct answer is C",
      },
      {
        id: 35,
        question: "What does the University of Malaya Consti Team (UMCT) dedicated to promote?",
        correct: "D. Constitutional literacy",
        incorrect: [
          "A. Student political activism",
          "B. International legal affairs",
          "C. Public health awareness",
        ],
        context:
          "The correct answer is D",
      },
      {
        id: 36,
        question: "What does EDICT advocate for in improving custodial systems in Malaysia?",
        correct: "C. Stronger oversight, transparency, and accountability",
        incorrect: [
          "A. More detention centres nationwide",
          "B. Increased police recruitment",
          "D. Expanded immigration enforcement powers",
        ],
        context:
          "The correct answer is C",
      },
      {
        id: 37,
        question: "What communities does Morlivly Wellness‚Äô social enterprise positively impacts?",
        correct: "B. Marginalised farmers and Indigenous communities",
        incorrect: [
          "A. Urban youth and local artists",
          "C. Migrant workers and refugees",
          "D. Small business owners and entrepreneurs",
        ],
        context:
          "The correct answer is B",
      },
      {
        id: 38,
        question: "How does Tindak Malaysia educate Malaysian citizens to learn about the electorate scene and the redelineation process?",
        correct: "A. Through its online electoral map site",
        incorrect: [
          "B. By publishing a weekly political column in major newspapers",
          "C. By conducting door-to-door canvassing and surveys",
          "D. Through televised public debate forums",
        ],
        context:
          "The correct answer is A",
      },
      {
        id: 39,
        question: "How does Wira-Wira Malaysia uplist underprivileged youth?",
        correct: "C. By implementing programmes that equip them with vital soft skills to drive positive change",
        incorrect: [
          "A. By providing direct financial aid and scholarships for their education",
          "B. Through organising large-scale volunteer-driven community clean-up projects",
          "D. By offering free legal assistance and counseling services",
        ],
        context:
          "The correct answer is C",
      },
      {
        id: 40,
        question: "What is a primary focus of World Vision Malaysia's Child Protection programmes?",
        correct: "C. To tackle the roots of poverty and injustice, for the sustained well-being of children, especially the most vulnerable",
        incorrect: [
          "A. Promoting children's participation in national arts and culture competitions",
          "B. Advocating for corporate partnerships to fund children's entertainment centers",
          "D. Establishing legal aid services for family mediation and custody battles",
        ],
        context:
          "The correct answer is C",
      },
      {
        id: 41,
        question: "What is a key benefit for an educational institution that becomes a part of the Mind Matters Network?",
        correct: "B. The core committee of the Network provides support through activities, resources, networking, and training",
        incorrect: [
          "A. It receives direct government funding for its mental health programs",
          "C. It gains the authority to certify mental health professionals",
          "D. Its curriculum is automatically redesigned to include psychological studies",
        ],
        context:
          "The correct answer is B",
      },
      {
        id: 43,
        question: "How does Kumpulan ACTS Berhad support refugees and asylum seekers in Malaysia?",
        correct: "A. By providing medical assistance",
        incorrect: [
          "B. By offering legal aid for resettlement applications",
          "C. Through organising vocational training and job placements",
          "D. By running temporary shelter homes for new arrivals",
        ],
        context:
          "The correct answer is A",
      },
      {
        id: 45,
        question: "What core issue regarding persons with disabilities is the focus of Project Lily's current work?",
        correct: "B. How gender and disability shapes life experiences",
        incorrect: [
          "A. Improving physical accessibility in public transportation systems",
          "C. Increasing employment quotas for persons with disabilities in the private sector",
          "D. Advocating for an inclusive educational curriculum in mainstream schools",
        ],
        context:
          "The correct answer is B",
      },
      {
        id: 46,
        question: "What gaps does R Youth Initiative aim to address among refugee youths in Malaysia?",
        correct: "C. Education, vocational training, and employment skills",
        incorrect: [
          "A. Healthcare access, nutrition, and mental wellness support",
          "B. Legal representation, housing, and resettlement services",
          "D. Sports, arts, and cultural integration programs",
        ],
        context:
          "The correct answer is C",
      },
      {
        id: 47,
        question: "The following are how the Refugee Women Support Collective support refugee women except:",
        correct: "D. Offer direct financial grants for start-ups",
        incorrect: [
          "A. Organise skills training, empowerment workshops, and leadership development",
          "B. Create safe space for mental health awareness and peer support",
          "C. Provide access to information on healthcare, education and rights",
        ],
        context:
          "The correct answer is D",
      },
      {
        id: 48,
        question: "What is the primary educational focus of Pocket of Pink's \"Pocket Pal\" activity book for youth?",
        correct: "B. Comprehensive sexual education",
        incorrect: [
          "A. Environmental conservation and sustainable living habits",
          "C. Basic financial literacy and money management skills",
          "D. The fundamentals of coding and computer science",
        ],
        context:
          "The correct answer is B",
      },
      {
        id: 54,
        question: "What does HaKita aim to achieve through its work?",
        correct: "A. Empower individuals to understand and exercise their human rights",
        incorrect: [
          "B. Provide direct legal representation in court cases",
          "C. Lobby for new human rights legislation",
          "D. Offer international scholarships for human rights studies",
        ],
        context:
          "The correct answer is A",
      },
      {
        id: 55,
        question: "Which of the following activities is commonly associated with MLSN?",
        correct: "B. Organising workshops, webinars, and networking events for law students",
        incorrect: [
          "A. Publishing legal textbooks for primary schools",
          "C. Providing employment for law graduates in government agencies",
          "D. Conducting nationwide legal audits of corporations",
        ],
        context:
          "The correct answer is B",
      },
      {
        id: 56,
        question: "The KL Legal Aid Centre provides legal aid in the following areas of law except:",
        correct: "C. Intellectual property matters",
        incorrect: [
          "A. Civil (including family, employment, citizenship and other matters)",
          "B. Syariah matters",
          "D. Criminal matters that are not covered by YBGK",
        ],
        context:
          "The correct answer is C",
      },
      {
        id: 57,
        question: "What issue does the Bar Council Women‚Äôs Rights Committee S.A.V. M.E. campaign focus on? ",
        correct: "B. Violence against women and girls",
        incorrect: [
          "A. Closing the gender pay gap in the private sector",
          "C. Increasing women's representation in political office",
          "D. Improving maternity leave policies and childcare support",
        ],
        context:
          "The correct answer is B",
      },
      {
        id: 60,
        question: "What is the mission of the Bar Council Human Rights Committee?",
        correct: "B. To uphold, promote and protect human rights in accordance with international human rights norms",
        incorrect: [
          "A. To provide free legal aid for civil and criminal cases",
          "C. To monitor and report on national government compliance with economic treaties",
          "D. To organise cultural exchange programs to foster international understanding",
        ],
        context:
          "The correct answer is B",
      },
    ];

    // --- GAME LOGIC ---
    let score = 0;
    const maxSpins = 4;
    let spinsLeft = maxSpins;
    let usedQuizIds = new Set();
    let currentCorrectAnswer = "";
    let isSpinning = false;
    let quizAnswered = false; // Flag: true if the current question has been answered
    let pendingQuizId = null; // ID of the quiz currently displayed, but not yet answered

    const gameInfoEl = document.getElementById("game-info");
    const spinsScoreInfoEl = document.getElementById("spins-score-info");
    const wheelContainerEl = document.getElementById("wheel-container");
    const wheelEl = document.getElementById("wheel");
    const quizSectionEl = document.getElementById("quiz-section");
    const questionTextEl = document.getElementById("question-text");
    const choicesContainerEl = document.getElementById("choices-container");
    const spinBtnEl = document.getElementById("spin-btn");
    const playAgainBtnEl = document.getElementById("play-again-btn");

    function saveGame() {
      const gameState = {
        score: score,
        spinsLeft: spinsLeft,
        usedQuizIds: Array.from(usedQuizIds),
        pendingQuizId: pendingQuizId,
        quizAnswered: quizAnswered,
      };
      setCookie("hrfQuizState", JSON.stringify(gameState), 30); // Save for 30 days
    }

    function resetGame() {
      score = 0;
      spinsLeft = maxSpins;
      usedQuizIds = new Set();
      pendingQuizId = null;
      quizAnswered = false;

      deleteCookie("hrfQuizState");

      // Reset UI elements to starting state
      gameInfoEl.textContent = " ";

      // Ensure buttons are visible/hidden correctly before calling updateInfo
      spinBtnEl.style.display = "block";
      playAgainBtnEl.style.display = "none";

      resetQuizUI(); // Ensures score/spin info is updated and quiz section is hidden
    }

    function updateInfo() {
      if (!(spinsScoreInfoEl.textContent === `Game Over! Final Score: ${score}/${maxSpins}`)) spinsScoreInfoEl.textContent = `Rounds Left: ${spinsLeft} | Score: ${score}`;

      if (quizAnswered && spinsLeft === 0) {
        // Button re-enabled after answer is selected
        spinBtnEl.textContent = `End Game`;
      } else if (quizAnswered && spinsLeft > 0) {
        // Button re-enabled after answer is selected
        spinBtnEl.textContent = `Spin the Wheel (${spinsLeft} left)`;
      } else if (!quizAnswered && quizSectionEl.style.display !== "none") {
        // Button disabled when quiz is visible and not answered
        spinBtnEl.textContent = "Answer the question first";
      } else {
        // Default state before first spin or after spin finished/UI reset
        spinBtnEl.textContent = `Spin the Wheel (${spinsLeft} left)`;
      }

      // Main button control: disable if spinning, or if quiz is active and not answered, or if game is over (and 'play again' is now visible)
      const shouldSpinBtnBeDisabled =
        isSpinning ||
        (!quizAnswered && quizSectionEl.style.display !== "none") ||
        (spinsLeft === 0 && !quizAnswered);
      spinBtnEl.disabled = shouldSpinBtnBeDisabled;
    }

    function getRandomUniqueQuiz() {
      const availableQuizzes = quizData.filter(
        (quiz) => !usedQuizIds.has(quiz.id)
      );
      if (availableQuizzes.length === 0) return null;

      const idx = Math.floor(Math.random() * availableQuizzes.length);
      return availableQuizzes[idx];
    }

    function displayQuiz(quiz) {
      quizAnswered = false;
      quizSectionEl.style.display = "block";

      // Ensure the displayed quiz ID is saved as pending
      pendingQuizId = quiz.id;
      saveGame();

      questionTextEl.innerHTML = quiz.question; // Use innerHTML to allow HTML in the question string

      currentCorrectAnswer = quiz.correct;
      const context = quiz.context; // Store context for reveal

      // Combine correct and incorrect options
      const options = [quiz.correct, ...quiz.incorrect].sort();

      choicesContainerEl.innerHTML = "";
      options.forEach((option, index) => {
        const button = document.createElement("button");
        button.className = "choice-btn";
        button.textContent = option;
        // üëá UPDATED: Assign bg based on the index (0, 1, 2, 3) üëá
        const sequentialbg = choicebg[index];
        button.style.setProperty("--bg", `url('${sequentialbg}')`);
        // üëÜ END UPDATED üëÜ
        button.onclick = () => checkAnswer(option, button, context);
        choicesContainerEl.appendChild(button);
      });

      updateInfo(); // Button will disable here
    }

    function checkAnswer(selectedAnswer, clickedButton, context) {
      quizAnswered = true;
      const isCorrect = selectedAnswer === currentCorrectAnswer;
      const allButtons = choicesContainerEl.querySelectorAll(".choice-btn");

      // Disable all buttons and highlight results
      allButtons.forEach((btn) => {
        btn.disabled = true;
        if (btn.textContent === currentCorrectAnswer) {
          btn.classList.add("correct-answer");
        } else if (btn === clickedButton && !isCorrect) {
          btn.classList.add("wrong-answer");
        }
      });

      if (isCorrect) {
        score++;
        questionTextEl.innerHTML = `‚úÖ Correct!<br>${context}`;
      } else {
        questionTextEl.innerHTML = `‚ùå Incorrect!<br>${context}`;
      }

      // After successfully answering, clear the pending question ID
      pendingQuizId = null;

      saveGame(); // SAVE NEW SCORE/STATE
      updateInfo(); // Button will re-enable here as 'Next Advocate'
    }

    function resetQuizUI() {
      quizAnswered = false;
      quizSectionEl.style.display = "none";
      choicesContainerEl.innerHTML = "";

      // Final screen when all spins are done
      if (spinsLeft === 0) {
        spinBtnEl.style.display = "none";
        playAgainBtnEl.style.display = "block"; // Show play again button

        spinsScoreInfoEl.textContent = `Game Over! Final Score: ${score}/${maxSpins}`;
      } else {
        spinBtnEl.style.display = "block";
        playAgainBtnEl.style.display = "none"; // Hide play again button
      }

      updateInfo();
    }

    function spinWheel() {
      // Logic for moving to the next round (only allowed if answered or first spin)
      if (quizAnswered || quizSectionEl.style.display === "none") {
        if (spinsLeft === 0) {
          resetQuizUI(); // Game over sequence
          return;
        }
        // Reset UI for the next spin immediately
        resetQuizUI();
      } else {
        // This case should be prevented by the disabled button, but as a guard:
        return;
      }

      // Spinning logic
      isSpinning = true;

      const quiz = getRandomUniqueQuiz();
      if (!quiz) {
        gameInfoEl.textContent = "All advocates discovered!";
        spinBtnEl.disabled = true;
        return;
      }

      spinsLeft--; // Spin count decrements only when a spin successfully starts
      usedQuizIds.add(quiz.id);
      // We rely on displayQuiz to set pendingQuizId and save the state before displaying the question

      // Hide quiz, show wheel
      wheelContainerEl.style.display = "block";
      spinBtnEl.disabled = true;

      // Animate the wheel (just visual flair)
      wheelEl.style.transition = "none";
      wheelEl.style.transform = "rotate(0deg)";
      // Force repaint
      wheelEl.offsetHeight;
      wheelEl.style.transition = "transform 3s ease-out";
      // Spin between 10 to 12 rotations for decoration
      const finalRotation =
        360 * (10 + Math.random() * 2) + Math.random() * 360;
      wheelEl.style.transform = `rotate(${finalRotation}deg)`;

      // After animation, hide wheel and show quiz
      setTimeout(() => {
        wheelContainerEl.style.display = "none";
        isSpinning = false; // Spinning finished
        displayQuiz(quiz);
      }, 3000); // Animation duration
    }

    function initGame() {
      // 1. Load game state from cookie
      const savedState = getCookie("hrfQuizState");
      if (savedState) {
        try {
          const gameState = JSON.parse(savedState);
          score = "score" in gameState ? gameState.score : 0;
          spinsLeft = "spinsLeft" in gameState ? gameState.spinsLeft : maxSpins;

          usedQuizIds = new Set(gameState.usedQuizIds || []);
          pendingQuizId = gameState.pendingQuizId || null;
          quizAnswered = gameState.quizAnswered || false;

          if (spinsLeft === 0) {
            quizAnswered = true; // Ensure game over UI if finished
          }
        } catch (e) {
          console.error("Error loading game state:", e);
        }
      }

      // 2. RESTORE PENDING QUIZ if one exists and hasn't been answered
      if (pendingQuizId !== null && !quizAnswered) {
        const pendingQuiz = quizData.find((q) => q.id === pendingQuizId);
        if (pendingQuiz) {
          // Restore the quiz display.
          displayQuiz(pendingQuiz);
        }
      }

      // 3. If the game is over on load, trigger the game over UI
      if (spinsLeft === 0) {
        resetQuizUI();
      }

      // 4. Set up event listener and update UI
      updateInfo();
      spinBtnEl.addEventListener("click", spinWheel);
      playAgainBtnEl.addEventListener("click", resetGame);
    }

    // Run game initialization once DOM is loaded
    window.addEventListener("DOMContentLoaded", initGame);
  </script>
</html>
